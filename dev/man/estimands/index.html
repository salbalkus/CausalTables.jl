<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Approximating ground truth causal estimands · CausalTables.jl</title><meta name="title" content="Approximating ground truth causal estimands · CausalTables.jl"/><meta property="og:title" content="Approximating ground truth causal estimands · CausalTables.jl"/><meta property="twitter:title" content="Approximating ground truth causal estimands · CausalTables.jl"/><meta name="description" content="Documentation for CausalTables.jl."/><meta property="og:description" content="Documentation for CausalTables.jl."/><meta property="twitter:description" content="Documentation for CausalTables.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">CausalTables.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><a class="tocitem" href="../formatting/">Turning data into a <code>CausalTable</code></a></li><li><a class="tocitem" href="../generating-data/">Generating data for statistical experiments</a></li><li class="is-active"><a class="tocitem" href>Approximating ground truth causal estimands</a><ul class="internal"><li><a class="tocitem" href="#API"><span>API</span></a></li></ul></li><li><a class="tocitem" href="../ground-truth/">Computing ground truth conditional distributions</a></li><li><a class="tocitem" href="../network-summaries/">Network summaries</a></li><li><a class="tocitem" href="../api/">Full API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Approximating ground truth causal estimands</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Approximating ground truth causal estimands</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/salbalkus/CausalTables.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/salbalkus/CausalTables.jl/blob/main/docs/src/man/estimands.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Approximating-Ground-Truth-Causal-Estimands"><a class="docs-heading-anchor" href="#Approximating-Ground-Truth-Causal-Estimands">Approximating Ground Truth Causal Estimands</a><a id="Approximating-Ground-Truth-Causal-Estimands-1"></a><a class="docs-heading-anchor-permalink" href="#Approximating-Ground-Truth-Causal-Estimands" title="Permalink"></a></h1><p>In causal inference, we are often interested in the value of some causal estimand, such as the average treatment effect (ATE) or the average policy effect (APE). These estimands are defined in terms of counterfactuals <span>$Y(a)$</span>, the value of an outcome <span>$Y$</span> under a given treatment regime. For example, the average treatment effect is denoted</p><p class="math-container">\[\mathbb{E}\Big(Y(1) - Y(0)\Big)\]</p><p>where <span>$Y(a)$</span> denotes the outcome <span>$Y$</span> that would have occurred had the treatment been set to <span>$a$</span>. Similarly, we denote the average policy effect as</p><p class="math-container">\[\mathbb{E}\Big(Y(a^*) - Y(a)\Big)\]</p><p>where <span>$a$</span> is the natural value of treatment under no intervention and <span>$a^*$</span> is the value of treatment under some policy.</p><p>CausalTables.jl provides functions that numerically approximate the values of several common estimands given a ground truth <code>StructuralCausalModel</code> object. This can be useful for evaluating the performance of causal inference methods on simulated data. Available estimands include:</p><ul><li>Counterfactual Means (<code>cfmean</code>)</li><li>Counterfactual Differences (<code>cfdiff</code>)</li><li>Average Treatment Effect (<code>ate</code>), including among the Treated (<code>att</code>) and Untreated (<code>atu</code>)</li><li>Average Policy Effect (<code>ape</code>), also known as the causal effect of a Modified Treatment Policy.</li></ul><p>In addition, one can simulate counterfactual outcomes directly using the <code>draw_counterfactual</code> function. Each of these is documented in detail in the following section. For low-level functions that can be used to approximate more complicated custom ground truth estimands in various settings, see <a href="../ground-truth/">Computing ground truth conditional distributions</a>.</p><h2 id="API"><a class="docs-heading-anchor" href="#API">API</a><a id="API-1"></a><a class="docs-heading-anchor-permalink" href="#API" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CausalTables.additive_mtp-Tuple{Any}-man-estimands" href="#CausalTables.additive_mtp-Tuple{Any}-man-estimands"><code>CausalTables.additive_mtp</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">additive_mtp(δ)</code></pre><p>Constructs a function that adds a constant (or constant vector) δ to the treatment variable(s) in a <code>CausalTable</code> object. This function is intended to be used as an argument to <code>ape</code>.</p><p><strong>Arguments</strong></p><ul><li>δ: The &quot;additive shift&quot; to be applied to the treatment variable of a <code>CausalTable</code>.</li></ul><p><strong>Returns</strong></p><ul><li>A function that takes a <code>CausalTable</code> object as input and returns a column table of treatments that have been shifted by δ units.</li></ul><p><strong>Example</strong></p><pre><code class="language- hljs">using Distributions
dgp = @dgp(
    L ~ Beta(2, 4),
    A ~ @.(Normal(L)),
    Y ~ @.(Normal(A + 2 * L + 1))
)
scm = StructuralCausalModel(dgp, [:A], [:Y], [:L])
ape(scm, additive_mtp(0.5))</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/salbalkus/CausalTables.jl/blob/9d6415dd239170839297afdf184eba4a4a8269d4/src/estimands.jl#L379-L401">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CausalTables.ape-Tuple{StructuralCausalModel, Function}-man-estimands" href="#CausalTables.ape-Tuple{StructuralCausalModel, Function}-man-estimands"><code>CausalTables.ape</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ape(scm::StructuralCausalModel, intervention::Function; samples = 10^6)</code></pre><p>Approximate the average policy effect for a given structural causal model (SCM), along with its efficiency bound. This is also known as the causal effect of a modified treatment policy, and is approximated using Monte Carlo sampling. Note that unless <code>intervention</code> is piecewise smooth invertible, the estimated statistical quantity may not have a causal interpretation; see <a href="https://pubmed.ncbi.nlm.nih.gov/23913589/">Haneuse and Rotnizky (2013)</a>. Mathematically, this is</p><p class="math-container">\[E(Y(d(a) - Y(a))\]</p><p>where <span>$d(a)$</span> represents the intervention on the treatment variable(s) <span>$A$</span>, <span>$Y(d(a))$</span> represents the counterfactual <span>$Y$</span> under treatment <span>$d(a)$</span>, and <span>$Y(a)$</span> represents the counterfactual outcome under the naturally observed value of treatment. This statistical quantity is approximated using Monte Carlo sampling.</p><p>Convenience functions for generating <code>intervention</code> functions include <code>additive_mtp</code> and <code>multiplicative_mtp</code>, which construct functions that respectively add or multiply a constant (or constant vector) to the treatment variable(s). One can also implement their own intervention function; this function must take as input a <code>CausalTable</code> object and return a NamedTuple object with each key indexing a treatment variable that has been modified according to the intervention. Also see <code>cast_matrix_to_table_function</code> for a convenience function for constructing interventions.</p><p><strong>Arguments</strong></p><ul><li><code>scm::StructuralCausalModel</code>: The SCM from which data is to be simulated.</li><li><code>intervention::Function</code>: The intervention function to apply to the SCM.</li><li><code>samples</code>: The number of samples to draw from <code>scm</code> for Monte Carlo approximation (default is 10^6). This controls the precision of the approximation.</li></ul><p><strong>Returns</strong></p><p>A named tuple containing:</p><ul><li><code>μ</code>: The ATU approximation.</li><li><code>eff_bound</code>: The variance of the difference between the natural and counterfactual responses, which is equal to the efficiency bound for IID data. If observations are correlated, this may not have a meaningful interpretation.</li></ul><p><strong>Example</strong></p><pre><code class="language- hljs">using Distributions
dgp = CausalTables.@dgp(
    L ~ Beta(2, 4),
    A ~ @.(Normal(L)),
    Y ~ @.(Normal(A + 2 * L + 1))
)
scm = CausalTables.StructuralCausalModel(dgp, [:A], [:Y], [:L])
ape(scm, additive_mtp(0.5))
ape(scm, multiplicative_mtp(2.0))

# example of a custom intervention function
custom_intervention = cast_matrix_to_table_function(x -&gt; exp.(x))
ape(scm, custom_intervention)
</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/salbalkus/CausalTables.jl/blob/9d6415dd239170839297afdf184eba4a4a8269d4/src/estimands.jl#L435-L475">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CausalTables.ate-Tuple{StructuralCausalModel}-man-estimands" href="#CausalTables.ate-Tuple{StructuralCausalModel}-man-estimands"><code>CausalTables.ate</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ate(scm::StructuralCausalModel; samples = 10^6)</code></pre><p>Approximate the average treatment effect (ATE) for a given structural causal model (SCM), along with its efficiency bound, for a univariate binary treatment. Mathematically, this is</p><p class="math-container">\[E(Y(1) - Y(0))\]</p><p>where <span>$Y(a)$</span> represents the counterfactual <span>$Y$</span> had the treatment <span>$A$</span> been set to <span>$a$</span>. This statistical quantity is approximated using Monte Carlo sampling.</p><p><strong>Arguments</strong></p><ul><li><code>scm::StructuralCausalModel</code>: The SCM from which data is to be simulated.</li><li><code>samples</code>: The number of samples to draw from <code>scm</code> for Monte Carlo approximation (default is 10^6). This controls the precision of the approximation.</li></ul><p><strong>Returns</strong></p><p>A named tuple containing:</p><ul><li><code>μ</code>: The ATE approximation.</li><li><code>eff_bound</code>: The variance of the counterfactual response, which is equal to the efficiency bound for IID data. If observations are correlated, this may not have a meaningful interpretation.</li></ul><p><strong>Example</strong></p><pre><code class="language- hljs">using Distributions
dgp = @dgp(
    L ~ Beta(2, 4),
    A ~ @.(Bernoulli(L)),
    Y ~ @.(Normal(A + L))
)
scm = StructuralCausalModel(dgp, :A, :Y, [:L])
ate(scm)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/salbalkus/CausalTables.jl/blob/9d6415dd239170839297afdf184eba4a4a8269d4/src/estimands.jl#L215-L246">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CausalTables.att-Tuple{StructuralCausalModel}-man-estimands" href="#CausalTables.att-Tuple{StructuralCausalModel}-man-estimands"><code>CausalTables.att</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">att(scm::StructuralCausalModel; samples = 10^6)</code></pre><p>Approximate the average treatment effect among the treated (ATT) for a given structural causal model (SCM), along with its efficiency bound, for a univariate binary treatment. Mathematically, this is</p><p class="math-container">\[E(Y(1) - Y(0) \mid A = 1)\]</p><p>where <span>$Y(a)$</span> represents the counterfactual <span>$Y$</span> had the treatment <span>$A$</span> been set to <span>$a$</span>. This statistical quantity is approximated using Monte Carlo sampling.</p><p><strong>Arguments</strong></p><ul><li><code>scm::StructuralCausalModel</code>: The SCM from which data is to be simulated.</li><li><code>samples</code>: The number of samples to draw from <code>scm</code> for Monte Carlo approximation (default is 10^6). This controls the precision of the approximation.</li></ul><p><strong>Returns</strong></p><p>A named tuple containing:</p><ul><li><code>μ</code>: The ATT approximation.</li><li><code>eff_bound</code>: The variance of the counterfactual response, which is equal to the efficiency bound for IID data. If observations are correlated, this may not have a meaningful interpretation.</li></ul><p><strong>Example</strong></p><pre><code class="language- hljs">using Distributions
dgp = @dgp(
    L ~ Beta(2, 4),
    A ~ @.(Bernoulli(L)),
    Y ~ @.(Normal(A + L))
)
scm = StructuralCausalModel(dgp, :A, :Y, [:L])
att(scm, treat_all, treat_none)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/salbalkus/CausalTables.jl/blob/9d6415dd239170839297afdf184eba4a4a8269d4/src/estimands.jl#L262-L293">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CausalTables.atu-Tuple{StructuralCausalModel}-man-estimands" href="#CausalTables.atu-Tuple{StructuralCausalModel}-man-estimands"><code>CausalTables.atu</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">atu(scm::StructuralCausalModel; samples = 10^6)</code></pre><p>Approximate the average treatment effect among the untreated (ATU) for a given structural causal model (SCM), along with its efficiency bound, for a univariate binary treatment. Mathematically, this is</p><p class="math-container">\[E(Y(1) - Y(0) \mid A = 0)\]</p><p>where <span>$Y(a)$</span> represents the counterfactual <span>$Y$</span> had the treatment <span>$A$</span> been set to <span>$a$</span>. This statistical quantity is approximated using Monte Carlo sampling.</p><p><strong>Arguments</strong></p><ul><li><code>scm::StructuralCausalModel</code>: The SCM from which data is to be simulated.</li><li><code>samples</code>: The number of samples to draw from <code>scm</code> for Monte Carlo approximation (default is 10^6). This controls the precision of the approximation.</li></ul><p><strong>Returns</strong></p><p>A named tuple containing:</p><ul><li><code>μ</code>: The ATU approximation.</li><li><code>eff_bound</code>: The variance of the counterfactual response, which is equal to the efficiency bound for IID data. If observations are correlated, this may not have a meaningful interpretation.</li></ul><p><strong>Example</strong></p><pre><code class="language- hljs">using Distributions
dgp = @dgp(
    L ~ Beta(2, 4),
    A ~ @.(Bernoulli(L)),
    Y ~ @.(Normal(A + L))
)
scm = StructuralCausalModel(dgp, :A, :Y, [:L])
atu(scm, treat_all, treat_none)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/salbalkus/CausalTables.jl/blob/9d6415dd239170839297afdf184eba4a4a8269d4/src/estimands.jl#L309-L340">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CausalTables.cast_matrix_to_table_function-Tuple{Function}-man-estimands" href="#CausalTables.cast_matrix_to_table_function-Tuple{Function}-man-estimands"><code>CausalTables.cast_matrix_to_table_function</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">cast_matrix_to_table_function(func::Function)</code></pre><p>Wraps a given function <code>func</code> that operates on a matrix and returns a new function that operates on a <code>CausalTable</code> object. The returned function converts the <code>CausalTable</code>&#39;s treatment matrix to a table, applies <code>func</code> to this matrix, and then converts the result back to a column table with the same header as the original treatment matrix.</p><p><strong>Arguments</strong></p><ul><li><code>func::Function</code>: A function that takes a matrix as input and returns a matrix.</li></ul><p><strong>Returns</strong></p><ul><li>A function that takes a <code>CausalTable</code> object as input and returns a column table.</li></ul><p><strong>Example</strong></p><pre><code class="language- hljs">custom_intervention = cast_matrix_to_table_function(x -&gt; exp.(x))</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/salbalkus/CausalTables.jl/blob/9d6415dd239170839297afdf184eba4a4a8269d4/src/estimands.jl#L359-L374">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CausalTables.cfdiff-Tuple{StructuralCausalModel, Function, Function}-man-estimands" href="#CausalTables.cfdiff-Tuple{StructuralCausalModel, Function, Function}-man-estimands"><code>CausalTables.cfdiff</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">cfdiff(scm::StructuralCausalModel, intervention1::Function, intervention2::Function; samples = 10^6)</code></pre><p>Approximate the difference between two counterfactual response means – that under <code>intervention1</code> having been applied to the treatment, and that under <code>intervention2</code> – for a given structural causal model (SCM), along with its efficiency bound. Mathematically, this is</p><p class="math-container">\[E(Y(d_1(a)) - Y(d_2(a)))\]</p><p>where <span>$d_1$</span> and <span>$d_2$</span> represent <code>intervention1</code> and <code>intervention2</code> being applied on the treatment variable(s) <span>$A$</span>. This statistical quantity is approximated using Monte Carlo sampling. </p><p><strong>Arguments</strong></p><ul><li><code>scm::StructuralCausalModel</code>: The SCM from which data is to be simulated.</li><li><code>intervention1::Function</code>: The first intervention function to be contrasted.</li><li><code>intervention2::Function</code>: The second intervention function to be contrasted.</li><li><code>samples</code>: The number of samples to draw from <code>scm</code> for Monte Carlo approximation (default is 10^6). This controls the precision of the approximation.</li></ul><p><strong>Returns</strong></p><p>A named tuple containing:</p><ul><li><code>μ</code>: The mean difference in counterfactual outcomes.</li><li><code>eff_bound</code>: The variance of the difference in counterfactual responses, which is equal to the efficiency bound for IID data. If observations are correlated, this may not have a meaningful interpretation.</li></ul><p><strong>Example</strong></p><pre><code class="language- hljs">using Distributions
dgp = @dgp(
    L ~ Beta(2, 4),
    A ~ @.(Bernoulli(L)),
    Y ~ @.(Normal(A + L))
)
scm = StructuralCausalModel(dgp, :A, :Y, [:L])
cfdiff(scm, treat_all, treat_none)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/salbalkus/CausalTables.jl/blob/9d6415dd239170839297afdf184eba4a4a8269d4/src/estimands.jl#L116-L149">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CausalTables.cfmean-Tuple{StructuralCausalModel, Function}-man-estimands" href="#CausalTables.cfmean-Tuple{StructuralCausalModel, Function}-man-estimands"><code>CausalTables.cfmean</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">cfmean(scm::StructuralCausalModel, intervention::Function; samples = 10^6)</code></pre><p>Approximate the counterfactual mean of the response had <code>intervention</code> been applied to the treatment, along with its efficiency bound, for a given structural causal model (SCM). Mathematically, this estimand is</p><p class="math-container">\[E(Y(d(a)))\]</p><p>where <span>$d(a)$</span> represents an intervention on the treatment variable(s) <span>$A$</span>. This statistical quantity is approximated using Monte Carlo sampling. </p><p><strong>Arguments</strong></p><ul><li><code>scm::StructuralCausalModel</code>: The SCM from which data is to be simulated.</li><li><code>intervention::Function</code>: The intervention function to apply to the SCM.</li><li><code>samples</code>: The number of samples to draw from <code>scm</code> for Monte Carlo approximation (default is 10^6). This controls the precision of the approximation.</li></ul><p><strong>Returns</strong></p><p>A named tuple containing:</p><ul><li><code>μ</code>: The mean of the counterfactual outcomes.</li><li><code>eff_bound</code>: The variance of the counterfactual response, which is equal to the efficiency bound for IID data. If observations are correlated, this may not have a meaningful interpretation.</li></ul><p><strong>Example</strong></p><pre><code class="language- hljs">using Distributions
dgp = @dgp(
    L ~ Beta(2, 4),
    A ~ @.(Bernoulli(L)),
    Y ~ @.(Normal(A + L))
)
scm = StructuralCausalModel(dgp, :A, :Y, [:L])
cfmean(scm, treat_all)
cfmean(scm, treat_none)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/salbalkus/CausalTables.jl/blob/9d6415dd239170839297afdf184eba4a4a8269d4/src/estimands.jl#L74-L107">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CausalTables.draw_counterfactual-Tuple{StructuralCausalModel, CausalTable, Function}-man-estimands" href="#CausalTables.draw_counterfactual-Tuple{StructuralCausalModel, CausalTable, Function}-man-estimands"><code>CausalTables.draw_counterfactual</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">draw_counterfactual(scm::StructuralCausalModel, parents::CausalTable, intervention::Function) -&gt; Vector</code></pre><p>Generate counterfactual responses based on a given structural causal model (SCM), a table of response parents, and an intervention function. That is, sample the responses that would have occurred had some intervention been applied to the treatment specified by the structural causal model.</p><p><strong>Arguments</strong></p><ul><li><code>scm::StructuralCausalModel</code>: The structural causal model used to generate counterfactual outcomes.</li><li><code>parents::CausalTable</code>: A table containing the variables causally preceding the response variable.</li><li><code>intervention::Function</code>: A function that defines the intervention to be applied to the parent variables. Use <code>cast_matrix_to_table_function</code> to convert a function acting on a treatment vector or matrix to a function that acts on a <code>CausalTable</code>.</li></ul><p><strong>Returns</strong></p><p>A vector of counterfactual responses.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/salbalkus/CausalTables.jl/blob/9d6415dd239170839297afdf184eba4a4a8269d4/src/estimands.jl#L53-L66">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CausalTables.intervene-Tuple{CausalTable, Function}-man-estimands" href="#CausalTables.intervene-Tuple{CausalTable, Function}-man-estimands"><code>CausalTables.intervene</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">intervene(ct::CausalTable, intervention::Function)</code></pre><p>Applies <code>intervention</code> to the treatment vector(s) within a CausalTable, and outputs a new CausalTable with the intervened treatment.</p><p><strong>Arguments</strong></p><ul><li><code>ct::CausalTable</code>: The data on which treatment should be intervened</li><li><code>intervention::Function</code>: A function that defines the intervention to be applied to the parent variables. Use <code>cast_matrix_to_table_function</code> to convert a function acting on a treatment vector or matrix to a function that acts on a <code>CausalTable</code>.</li></ul><p><strong>Returns</strong></p><p>A <code>CausalTable</code> containing the same data as <code>ct</code>, but with the treatment variable(s) modified accoding to <code>intervention</code></p><p><strong>Example</strong></p><pre><code class="language- hljs">using Distributions
dgp = @dgp(
    L ~ Beta(2, 4),
    A ~ @.(Bernoulli(L)),
    Y ~ @.(Normal(A + L))
)
scm = StructuralCausalModel(dgp, :A, :Y, [:L])
ct = rand(scm, 100)
intervene(ct, treat_all)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/salbalkus/CausalTables.jl/blob/9d6415dd239170839297afdf184eba4a4a8269d4/src/estimands.jl#L12-L36">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CausalTables.multiplicative_mtp-Tuple{Any}-man-estimands" href="#CausalTables.multiplicative_mtp-Tuple{Any}-man-estimands"><code>CausalTables.multiplicative_mtp</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">multiplicative_mtp(δ)</code></pre><p>Constructs a function that scales the treatment variable(s) in a <code>CausalTable</code> object by a constant δ. This function is intended to be used as an argument to <code>ape</code>.</p><p><strong>Arguments</strong></p><ul><li>δ: The &quot;multiplicative shift&quot; to be applied to the treatment variable of a <code>CausalTable</code>.</li></ul><p><strong>Returns</strong></p><ul><li>A function that takes a <code>CausalTable</code> object as input and returns a column table of treatments that have been scaled by δ units.</li></ul><p><strong>Example</strong></p><pre><code class="language- hljs">using Distributions
dgp = CausalTables.@dgp(
    L ~ Beta(2, 4),
    A ~ @.(Normal(L)),
    Y ~ @.(Normal(A + 2 * L + 1))
)
scm = CausalTables.StructuralCausalModel(dgp, [:A], [:Y], [:L])
ape(scm, multiplicative_mtp(2.0))</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/salbalkus/CausalTables.jl/blob/9d6415dd239170839297afdf184eba4a4a8269d4/src/estimands.jl#L407-L429">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CausalTables.treat_all-Tuple{CausalTable}-man-estimands" href="#CausalTables.treat_all-Tuple{CausalTable}-man-estimands"><code>CausalTables.treat_all</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">treat_all(ct::CausalTable)</code></pre><p>Intervenes on a <code>CausalTable</code> object by setting all treatment variables to 1.</p><p><strong>Arguments</strong></p><ul><li><code>ct::CausalTable</code>: A <code>CausalTable</code> object with a univariate binary treatment.</li></ul><p><strong>Returns</strong></p><p>A <code>NamedTuple</code> object with the same header as the treatment matrix in <code>ct</code>, where each treatment variable is set to 1.</p><p><strong>Example</strong></p><pre><code class="language- hljs">using Distributions
dgp = @dgp(
    L ~ Beta(2, 4),
    A ~ @.(Bernoulli(L)),
    Y ~ @.(Normal(A + L))
)
scm = StructuralCausalModel(dgp, :A, :Y, [:L])
data = rand(scm, 100)
treat_all(data)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/salbalkus/CausalTables.jl/blob/9d6415dd239170839297afdf184eba4a4a8269d4/src/estimands.jl#L163-L186">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CausalTables.treat_none-Tuple{Any}-man-estimands" href="#CausalTables.treat_none-Tuple{Any}-man-estimands"><code>CausalTables.treat_none</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">treat_all(ct::CausalTable)</code></pre><p>Intervenes on a <code>CausalTable</code> object by setting all treatment variables to 0.</p><p><strong>Arguments</strong></p><ul><li><code>ct::CausalTable</code>: A <code>CausalTable</code> object with a univariate binary treatment.</li></ul><p><strong>Returns</strong></p><p>A <code>NamedTuple</code> object with the same header as the treatment matrix in <code>ct</code>, where each treatment variable is set to 0.</p><p><strong>Example</strong></p><pre><code class="language- hljs">using Distributions
dgp = @dgp(
    L ~ Beta(2, 4),
    A ~ @.(Bernoulli(L)),
    Y ~ @.(Normal(A + L))
)
scm = StructuralCausalModel(dgp, :A, :Y, [:L])
data = rand(scm, 100)
treat_none(data)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/salbalkus/CausalTables.jl/blob/9d6415dd239170839297afdf184eba4a4a8269d4/src/estimands.jl#L189-L212">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../generating-data/">« Generating data for statistical experiments</a><a class="docs-footer-nextpage" href="../ground-truth/">Computing ground truth conditional distributions »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.0 on <span class="colophon-date" title="Tuesday 26 November 2024 21:50">Tuesday 26 November 2024</span>. Using Julia version 1.9.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
