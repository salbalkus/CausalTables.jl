<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Computing ground truth conditional distributions · CausalTables.jl</title><meta name="title" content="Computing ground truth conditional distributions · CausalTables.jl"/><meta property="og:title" content="Computing ground truth conditional distributions · CausalTables.jl"/><meta property="twitter:title" content="Computing ground truth conditional distributions · CausalTables.jl"/><meta name="description" content="Documentation for CausalTables.jl."/><meta property="og:description" content="Documentation for CausalTables.jl."/><meta property="twitter:description" content="Documentation for CausalTables.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">CausalTables.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><a class="tocitem" href="../formatting/">Turning data into a <code>CausalTable</code></a></li><li><a class="tocitem" href="../generating-data/">Generating data for statistical experiments</a></li><li><a class="tocitem" href="../estimands/">Approximating ground truth causal estimands</a></li><li class="is-active"><a class="tocitem" href>Computing ground truth conditional distributions</a><ul class="internal"><li><a class="tocitem" href="#Ground-Truth-Conditional-Distributions-API"><span>Ground Truth Conditional Distributions API</span></a></li></ul></li><li><a class="tocitem" href="../network-summaries/">Network summaries</a></li><li><a class="tocitem" href="../api/">API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Computing ground truth conditional distributions</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Computing ground truth conditional distributions</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/salbalkus/CausalTables.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/salbalkus/CausalTables.jl/blob/main/docs/src/man/ground-truth.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Computing-Ground-Truth-Conditional-Distributions"><a class="docs-heading-anchor" href="#Computing-Ground-Truth-Conditional-Distributions">Computing Ground Truth Conditional Distributions</a><a id="Computing-Ground-Truth-Conditional-Distributions-1"></a><a class="docs-heading-anchor-permalink" href="#Computing-Ground-Truth-Conditional-Distributions" title="Permalink"></a></h1><p>One main goal of CausalTables.jl is to allow statisticians to easily develop and test causal inference methods on simulated data. To this end, the package provides a way to compute &quot;ground truth&quot; causal quantities under a particular structural causal model (SCM). </p><p>Quick methods to approximate the most common ground truth estimands such as the average treatment effect are provided in the section <a href="../estimands/">Approximating ground truth causal estimands</a>. However, in many cases it is also helpful to know the ground truth of more complicated functions of the data, such as conditional distributions, conditional means, or conditional variances. For example, if one is building a machine learning model to predict a conditional mean <span>$\mathbb{E}(Y \mid X = x)$</span> or a conditional density <span>$p(y \mid X = x)$</span>, it may be useful to know the true conditional mean to evaluate the model&#39;s performance. This section will explain how to compute these ground truth quantities using CausalTables.jl.</p><p>Once we&#39;ve defined an SCM (see <a href="../generating-data/">Generating data for statistical experiments</a>) and have some table of data with variables matching those of our DGP, we can compute the ground truth conditional distributions of any variable in a CausalTable (given a corresponding DGP) using the <code>condensity</code> function. This returns a Distribution object from the package <a href="https://juliastats.org/Distributions.jl/stable/">Distributions.jl</a>.</p><p>Let&#39;s see an example. First, we&#39;ll define a DGP using the <code>@dgp</code> macro and create a StructuralCausalModel object from it. In this DGP, the outcome <span>$Y$</span> is dependent on the sum of its neighbors&#39; treatments in a random network, meaning that the distributions of some variables in the DGP can be quite complicated. </p><pre><code class="language-julia hljs">using Graphs
using CausalTables
using Random
using Distributions

dgp = @dgp(
        W ~ Binomial(10, 0.3),
        X ~ (@. Normal(W + 1)),
        A = Graphs.adjacency_matrix(barabasi_albert(length(X), 2)),
        Xs $ Sum(:X, :A),
        Y ~ (@. LogNormal(log(0.2 * Xs + 4), 0.1 * W + 1))
    )

scm = StructuralCausalModel(
    dgp;
    treatment = :X,
    response = :Y,
    confounders = [:W]
)</code></pre><p>Now, let&#39;s generate some data and compute the ground truth conditional distributions of the variables in the data. For any line starting with a <code>~</code> in the DGP, the <code>condensity</code> function will be able to return the true conditional distribution of that variable given the data. If the line is a summary function starting with <code>$</code>, <code>condensity</code> will return the conditional distribution of the variable being summarized only if it admits a closed-form solution (otherwise an error will be thrown). Note that if the DGP attempts to summarize a variable with no neighbors in a graph, the resulting conditional distribution will currently be <code>Binomial(0, 0.5)</code>, which denotes a point-mass distribution at 0.</p><pre><code class="language-julia hljs">Random.seed!(1);
ctbl = rand(scm, 5)
W_distribution = condensity(scm, ctbl, :W)
X_distribution = condensity(scm, ctbl, :X)
Xs_distribution = condensity(scm, ctbl, :Xs)</code></pre><p>One can also compute the ground truth conditional mean or variance of a variable in a CausalTable using the <code>conmean</code> and <code>convar</code> convenience functions:</p><pre><code class="language-julia hljs">σ2 = convar(scm, ctbl, :Y)
μ = conmean(scm, ctbl, :Y)</code></pre><p>With these, one can evaluate the performance of flexible statistical models involving functions of conditional densities or moments of a variable in a CausalTable.</p><h2 id="Ground-Truth-Conditional-Distributions-API"><a class="docs-heading-anchor" href="#Ground-Truth-Conditional-Distributions-API">Ground Truth Conditional Distributions API</a><a id="Ground-Truth-Conditional-Distributions-API-1"></a><a class="docs-heading-anchor-permalink" href="#Ground-Truth-Conditional-Distributions-API" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CausalTables.condensity-Tuple{StructuralCausalModel, CausalTable, Symbol}-man-ground-truth" href="#CausalTables.condensity-Tuple{StructuralCausalModel, CausalTable, Symbol}-man-ground-truth"><code>CausalTables.condensity</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">condensity(scm::StructuralCausalModel, ct::CausalTable, name::Symbol)</code></pre><p>Compute the conditional density of a variable in a StructuralCausalModel given a CausalTable.</p><p><strong>Arguments</strong></p><ul><li><code>scm::StructuralCausalModel</code>: The StructuralCausalModel representing the data generating process.</li><li><code>ct::CausalTable</code>: The CausalTable containing the observed data.</li><li><code>name::Symbol</code>: The variable for which to compute the conditional density.</li></ul><p><strong>Returns</strong></p><p>The conditional density of the variable <code>var</code> given the observed data.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/salbalkus/CausalTables.jl/blob/d6704885021d996eab708c49e3d0eab87f7a4722/src/conditional_density.jl#L1-L14">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CausalTables.conmean-Tuple{StructuralCausalModel, CausalTable, Symbol}-man-ground-truth" href="#CausalTables.conmean-Tuple{StructuralCausalModel, CausalTable, Symbol}-man-ground-truth"><code>CausalTables.conmean</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">conmean(scm::StructuralCausalModel, ct::CausalTable, name::Symbol)</code></pre><p>Compute the conditional mean of a variable in a CausalTable based on a DataGeneratingProcess.</p><p><strong>Arguments</strong></p><ul><li><code>scm::StructuralCausalModel</code>: The StructuralCausalModel object representing the data generating process.</li><li><code>ct::CausalTable</code>: The CausalTable object representing the data.</li><li><code>name::Symbol</code>: The variable for which to compute the conditional mean.</li></ul><p><strong>Returns</strong></p><p>An array of conditional means for the specified variable.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/salbalkus/CausalTables.jl/blob/d6704885021d996eab708c49e3d0eab87f7a4722/src/conditional_density.jl#L54-L67">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CausalTables.convar-Tuple{StructuralCausalModel, CausalTable, Symbol}-man-ground-truth" href="#CausalTables.convar-Tuple{StructuralCausalModel, CausalTable, Symbol}-man-ground-truth"><code>CausalTables.convar</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">convar(scm::StructuralCausalModel, ct::CausalTable, name::Symbol)</code></pre><p>Compute the conditional variance of a variable in a CausalTable based on a DataGeneratingProcess.</p><p><strong>Arguments</strong></p><ul><li><code>scm::StructuralCausalModel</code>: The StructuralCausalModel object representing the data generating process.</li><li><code>ct::CausalTable</code>: The CausalTable object representing the data.</li><li><code>name::Symbol</code>: The variable for which to compute the conditional mean.</li></ul><p><strong>Returns</strong></p><p>An array of conditional variances for the specified variable.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/salbalkus/CausalTables.jl/blob/d6704885021d996eab708c49e3d0eab87f7a4722/src/conditional_density.jl#L70-L83">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../estimands/">« Approximating ground truth causal estimands</a><a class="docs-footer-nextpage" href="../network-summaries/">Network summaries »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.2.1 on <span class="colophon-date" title="Friday 18 October 2024 14:17">Friday 18 October 2024</span>. Using Julia version 1.9.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
